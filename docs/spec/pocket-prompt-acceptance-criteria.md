# Pocket-Prompt Chrome拡張 受け入れ基準

## 概要

このドキュメントはPocket-Prompt Chrome拡張機能の受け入れ基準とテスト項目を記載します。EARS記法で定義された要件に対応する具体的なテスト基準を提供します。

🟢 **青信号**: 受け入れ基準は要件定義書で定義された要件から直接構築

## 機能テスト基準

### REQ-001: プロンプト保存機能の受け入れ基準

**Given（前提条件）**:
- Chrome拡張がインストール済み
- ポップアップUIが起動可能な状態
- chrome.storage API が利用可能

**When（実行条件）**:
- 新規プロンプト作成を選択
- タイトルに「コードレビュー依頼」を入力
- 本文に複数行のプロンプトテキストを入力
- 保存ボタンをクリック

**Then（期待結果）**:
- プロンプトがローカルストレージに正常保存される
- 保存完了の視覚的フィードバックが表示される
- プロンプト一覧に新しいエントリが即座に反映される

**テストケース**:
- [ ] 正常系: 有効なタイトルと本文でプロンプト保存が成功する
- [ ] 異常系: 空のタイトルまたは本文でバリデーションエラーが表示される
- [ ] 境界値: 10,000文字の本文が正常に保存される
- [ ] 複数行: 改行文字を含む本文が正確に保存・復元される

🟢 **青信号**: プロンプト保存は必須機能として明確に定義済み

### REQ-002: ワンクリックコピー機能の受け入れ基準

**Given（前提条件）**:
- プロンプトが1件以上保存済み
- ポップアップUIが表示中
- クリップボードAPIが利用可能

**When（実行条件）**:
- 保存済みプロンプトのコピーアイコンをクリック

**Then（期待結果）**:
- プロンプト本文がクリップボードに即座にコピーされる
- コピー完了の視覚的フィードバック（アイコン変化/通知）が表示される
- 他のアプリケーションで Ctrl+V で正常にペースト可能

**テストケース**:
- [ ] 正常系: 単一行プロンプトのワンクリックコピーが成功する
- [ ] 正常系: 複数行プロンプトの改行文字も含めてコピーされる
- [ ] 異常系: クリップボードAPI無効時の適切なエラーハンドリング
- [ ] パフォーマンス: コピー操作が1秒以内に完了する

🟢 **青信号**: ワンクリックコピーは必須機能として明確に定義済み

### REQ-003: ChatGPT会話履歴エクスポート機能の受け入れ基準

**Given（前提条件）**:
- ChatGPTページにアクセス中
- 会話セッションが存在する
- Chrome拡張がページに適切にインジェクション済み

**When（実行条件）**:
- エクスポート機能を起動
- 対象会話を選択
- Markdown形式でのエクスポートを実行

**Then（期待結果）**:
- 会話内容がMarkdown形式で構造化される
- ユーザーとアシスタントの発言が区別されて記録される
- ファイルダウンロードまたはクリップボードコピーが完了する
- 日時情報とメタデータが適切に含まれる

**テストケース**:
- [ ] 正常系: 短い会話（5往復未満）のエクスポートが成功する
- [ ] 正常系: 長い会話（50往復以上）のエクスポートが成功する
- [ ] 正常系: コードブロックを含む会話が正確にMarkdown化される
- [ ] 異常系: 会話なし状態でのエラーハンドリング
- [ ] パフォーマンス: 10MB未満のデータが30秒以内にエクスポートされる

🟢 **青信号**: ChatGPTエクスポートは必須機能として明確に定義済み

### REQ-101: ポップアップUI表示機能の受け入れ基準

**Given（前提条件）**:
- Chrome拡張がアクティブ
- Webページが読み込み完了
- 必要なAPIアクセス権限が付与済み

**When（実行条件）**:
- ブラウザツールバーの拡張アイコンをクリック

**Then（期待結果）**:
- ポップアップウィンドウが3秒以内に表示される
- 保存済みプロンプト一覧が正しく読み込まれる
- UI要素（ボタン、リスト、検索欄等）が正常に機能する
- レスポンシブデザインで適切にレイアウトされる

**テストケース**:
- [ ] 正常系: 初回起動時にデフォルトUIが表示される
- [ ] 正常系: プロンプト保存後の一覧更新が即座に反映される
- [ ] 異常系: ストレージアクセス失敗時の適切なフォールバック
- [ ] パフォーマンス: 100件のプロンプト保存時も3秒以内に表示

🟢 **青信号**: ポップアップUIは必須UI要件として明確に定義済み

### REQ-301: タグ・カテゴリ管理機能の受け入れ基準（Option機能）

**Given（前提条件）**:
- Option機能が有効化済み
- プロンプトが複数件保存済み
- オプションページが表示中

**When（実行条件）**:
- プロンプトにタグを追加
- カテゴリを選択して分類
- タグ検索を実行

**Then（期待結果）**:
- タグが正常に保存・表示される
- カテゴリ別フィルタが動作する
- タグ検索で関連プロンプトが抽出される
- 複数タグの組み合わせ検索が可能

**テストケース**:
- [ ] 正常系: プロンプトに複数タグを追加できる
- [ ] 正常系: カテゴリ階層での整理が可能
- [ ] 正常系: タグ名での部分一致検索が機能する
- [ ] 境界値: タグ名50文字制限の動作確認

🟢 **青信号**: タグ・カテゴリ機能はOption機能として明確に定義済み

### REQ-303: AI入力欄直接ペースト機能の受け入れ基準（Option機能）

**Given（前提条件）**:
- Option機能が有効化済み
- 対応AIサイト（ChatGPT/Claude/Gemini）にアクセス中
- プロンプトが保存済み

**When（実行条件）**:
- ポップアップでプロンプトを選択
- 「直接ペースト」ボタンをクリック

**Then（期待結果）**:
- AIサイトの入力欄に自動でプロンプトが挿入される
- 既存の入力内容への配慮（追記/置換選択可能）
- ページのDOM構造変更への耐性がある

**テストケース**:
- [ ] 正常系: ChatGPT入力欄への直接ペーストが成功する
- [ ] 正常系: Claude入力欄への直接ペーストが成功する  
- [ ] 正常系: Gemini入力欄への直接ペーストが成功する
- [ ] 異常系: 入力欄が見つからない場合の適切なフォールバック
- [ ] 更新対応: AIサイトのUI更新時の動作確認

🟢 **青信号**: AI入力欄連携はOption機能として明確に定義済み

## 非機能テスト基準

### パフォーマンステスト

**NFR-001: ポップアップ起動速度**

- [ ] 応答時間: ポップアップ表示が3秒以内
- [ ] スループット: 同時複数タブでの起動が安定動作
- [ ] 同時接続数: 最大10タブまでの同時利用が可能
- [ ] リソース使用量: メモリ使用量が50MB未満を維持

**テスト方法**:
- 負荷テストツール: Chrome DevTools Performance
- テストシナリオ: 10回連続起動での平均応答時間測定
- 合格基準: 平均3秒以内、最大5秒以内

**NFR-002: プロンプトコピー速度**

- [ ] 応答時間: ワンクリックコピーが1秒以内
- [ ] 大容量データ: 10,000文字プロンプトも1秒以内
- [ ] 連続操作: 10回連続コピーでも性能劣化なし

🔴 **赤信号**: パフォーマンス基準は一般的なUX要求から推測

### セキュリティテスト

**NFR-101: 権限管理**

- [ ] 認証: 不要な権限要求がない
- [ ] 認可: 最小権限の原則に従った権限セット
- [ ] データ保護: ローカルストレージの適切な暗号化
- [ ] 脆弱性: XSS/CSRF攻撃への耐性

**NFR-102: データ暗号化**

- [ ] 保存データ: プロンプト本文の暗号化保存
- [ ] 通信データ: クラウド同期時のHTTPS通信
- [ ] 機密情報: APIキー等の適切な保護

**テスト方法**:
- セキュリティ監査ツール: Chrome Extension Security Checker
- 脆弱性スキャン: OWASP ZAP等によるセキュリティテスト
- 権限確認: chrome://extensions での権限表示確認

🟡 **黄信号**: セキュリティ要件はChrome拡張のベストプラクティスから推測

## ユーザビリティテスト基準

### UX/UIテスト

- [ ] 直感的操作性: 初回利用者が5分以内でメイン機能を理解
- [ ] レスポンシブデザイン: ポップアップが各画面サイズで適切表示
- [ ] アクセシビリティ: WCAG 2.1 AA準拠（キーボード操作対応）
- [ ] エラーメッセージ: 分かりやすく解決策を提示するエラー表示

**テスト方法**:
- ユーザビリティテスト: 5名の初回利用者での操作観察
- A/Bテスト: UI配置パターンの比較テスト
- アクセシビリティチェック: axe-core等の自動検証ツール使用

### 継続利用性テスト

- [ ] 学習容易性: チュートリアルなしでの機能発見率80%以上
- [ ] 効率性: 熟練者の操作が手動入力より3倍高速
- [ ] 記憶しやすさ: 1週間後の操作再現率90%以上
- [ ] 満足度: NPS（Net Promoter Score）50以上

🔴 **赤信号**: 定量的なユーザビリティ指標は一般的なUX評価基準から推測

## Edgeケーステスト基準

### EDGE-001: chrome.storage APIエラー処理の受け入れ基準

**テストシナリオ**:
- ストレージ容量上限到達時のエラーハンドリング
- API呼び出し失敗時の適切な再試行処理
- データ破損時の復旧メカニズム

**合格基準**:
- [ ] システムがクラッシュしない
- [ ] 「ストレージ容量不足です。古いデータを削除してください」等の適切なエラーメッセージが表示される
- [ ] データの整合性が保たれる（部分保存の回避）
- [ ] 復旧可能な状態を維持する（バックアップ機能等）

### EDGE-002: 大容量データ処理の受け入れ基準

**テストシナリオ**:
- 5MB超の大容量プロンプト保存試行
- 1,000件超のプロンプト管理
- 50MB超の会話履歴エクスポート

**合格基準**:
- [ ] 大容量データ保存時に適切な警告を表示
- [ ] プロンプト数上限（1,000件）での新規保存拒否
- [ ] メモリ不足時の適切なエラー処理
- [ ] プログレスバー表示による処理状況の可視化

### EDGE-003: AIサイトUI変更への対応基準

**テストシナリオ**:
- ChatGPTのDOM構造変更シミュレーション
- 入力欄セレクタの変更への対応
- 未対応AIサイトでのアクセス

**合格基準**:
- [ ] DOM構造変更時の自動検出・対応
- [ ] 対応不可能時の適切なフォールバック（手動コピー案内）
- [ ] 未対応サイトでの機能無効化（エラー表示なし）

🟡 **黄信号**: Edge ケースは一般的なChrome拡張の運用課題から推測

## 統合テスト基準

### システム間連携テスト

- [ ] Chrome API連携: storage, tabs, activeTab APIの正常動作
- [ ] AIサイト連携: ChatGPT/Claude/Geminiでのページ操作
- [ ] クリップボード連携: システムクリップボードとの連携動作

### ブラウザ互換性テスト

- [ ] Chrome最新版: 常に最新のChromeでの動作保証
- [ ] Chrome ESR: 企業向けESRでの動作確認
- [ ] Edge Chromium: Microsoft Edge での動作確認（将来対応）

🟡 **黄信号**: ブラウザ対応範囲は一般的なChrome拡張の要求から推測

## リグレッションテスト基準

### 既存機能影響確認

- [ ] 既存機能の動作確認: 新機能追加後の既存プロンプト管理機能
- [ ] パフォーマンス劣化確認: 機能追加によるポップアップ起動速度への影響
- [ ] セキュリティ設定確認: 権限変更や新APIアクセスの影響評価

### アップデート時の互換性確認

- [ ] データマイグレーション: 旧バージョンからのデータ移行
- [ ] 設定継承: ユーザー設定の適切な継承
- [ ] Option機能: 段階的機能追加時の既存データ保護

## 受け入れテスト実行チェックリスト

### テスト実行前

- [ ] テスト環境の準備完了（Chrome拡張開発者モード）
- [ ] テストデータの準備完了（サンプルプロンプト、会話データ）
- [ ] テストツールの準備完了（Chrome DevTools、自動テストスイート）
- [ ] 実行担当者の確認完了（機能仕様の理解、テスト手順の習熟）

### テスト実行中

- [ ] 全機能テストの実行（REQ-001〜REQ-403の全要件）
- [ ] 全非機能テストの実行（パフォーマンス、セキュリティ、ユーザビリティ）
- [ ] 問題発見時の記録（スクリーンショット、再現手順、エラーログ）
- [ ] 修正後の再テスト（リグレッション確認含む）

### テスト完了後

- [ ] テスト結果の記録（合格/不合格、未実施項目の明記）
- [ ] 残存問題の整理（重要度別分類、対応方針の決定）
- [ ] 受け入れ可否の判定（リリース基準との照合）
- [ ] ステークホルダーへの報告（テスト結果サマリーの共有）

## リリース判定基準

### Phase 1: Private MVP リリース基準

**必須合格項目**:
- REQ-001〜REQ-005（基本機能）が全て合格
- NFR-001〜NFR-003（基本性能）が全て合格
- EDGE-001〜EDGE-003（基本エラー処理）が全て合格

**許容可能な問題**:
- Option機能（REQ-301〜REQ-305）の不具合
- 高度なEdgeケースでの軽微な問題

### Phase 2: コード整備完了判定基準

**必須合格項目**:
- TypeScript化100%完了
- テストカバレッジ80%以上達成
- セキュリティ監査の合格
- パフォーマンス最適化の完了

### Phase 3: OSS公開判定基準

**必須合格項目**:
- 全機能テストの合格
- 全非機能テストの合格
- ドキュメント整備100%完了
- ライセンス適用とコントリビューションガイドラインの整備

🟢 **青信号**: フェーズ別リリース基準は提供された開発戦略から直接構築