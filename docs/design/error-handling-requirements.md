# ErrorManager УдЂС╗Хт«џуЙЕ
# TASK-0010: сѓесЃЕсЃ╝сЃЈсЃ│сЃЅсЃфсЃ│сѓ░сЃ╗сЃГсѓ░тЪ║уЏц

## ­Ъј» уЏ«уџё

ChromeТІАт╝хсЂФсЂісЂЉсѓІтїЁТІгуџёсЂфсѓесЃЕсЃ╝сЃЈсЃ│сЃЅсЃфсЃ│сѓ░сЃ╗сЃГсѓ░тЪ║уЏцсѓњТЈљСЙЏсЂЌсђЂжЂІућетЊЂУ│фсѓњтљЉСИісЂЋсЂЏсѓІсђѓ

## ­ЪЊІ ТЕЪУЃйУдЂС╗Х

### REQ-ERR-001: ТДІжђатїќсѓесЃЕсЃ╝сЃГсѓ░
- сѓисѓ╣сЃєсЃасЂ»сЂЎсЂ╣сЂдсЂ«сѓесЃЕсЃ╝сѓњТДІжђатїќсЂЋсѓїсЂЪтйбт╝ЈсЂДУеўжї▓сЂЌсЂфсЂЉсѓїсЂ░сЂфсѓЅсЂфсЂё
- сѓесЃЕсЃ╝сЃГсѓ░сЂФсЂ»С╗ЦСИІсЂ«ТЃЁта▒сѓњтљФсѓђ:
  - сѓ┐сѓцсЃасѓ╣сѓ┐сЃ│сЃЌ
  - сѓесЃЕсЃ╝сЃгсЃЎсЃФ (ERROR, WARN, INFO, DEBUG)
  - сѓесЃЕсЃ╝сѓйсЃ╝сѓ╣ (moduleтљЇ, жќбТЋ░тљЇ)
  - сѓесЃЕсЃ╝сЃАсЃЃсѓ╗сЃ╝сѓИ
  - сѓ╣сѓ┐сЃЃсѓ»сЃѕсЃгсЃ╝сѓ╣
  - сЃдсЃ╝сѓХсЃ╝сѓесЃ╝сѓИсѓДсЃ│сЃѕТЃЁта▒
  - жќбжђБсЂЎсѓІсЃфсѓ»сѓесѓ╣сЃѕID

### REQ-ERR-002: ChromeТІАт╝хуЅ╣ТюЅсѓесЃЕсЃ╝т»Йт┐ю
- ChromeТІАт╝хтЏ║ТюЅсЂ«сѓесЃЕсЃ╝сЃЉсѓ┐сЃ╝сЃ│сѓњУфЇУГўсЃ╗тЄдуљєсЂЌсЂфсЂЉсѓїсЂ░сЂфсѓЅсЂфсЂё:
  - Manifest V3 service worker сѓесЃЕсЃ╝
  - Content script injection сѓесЃЕсЃ╝  
  - Chrome storage quota exceeded сѓесЃЕсЃ╝
  - Permission denied сѓесЃЕсЃ╝
  - Message passing timeout сѓесЃЕсЃ╝

### REQ-ERR-003: сЃдсЃ╝сѓХсЃ╝сЃЋсЃгсЃ│сЃЅсЃфсЃ╝сѓесЃЕсЃ╝сЃАсЃЃсѓ╗сЃ╝сѓИ
- ТіђУАЊуџёсЂфсѓесЃЕсЃ╝сѓњсЃдсЃ╝сѓХсЃ╝уљєУДБтЈ»УЃйсЂфсЃАсЃЃсѓ╗сЃ╝сѓИсЂФтцЅТЈЏсЂЌсЂфсЂЉсѓїсЂ░сЂфсѓЅсЂфсЂё
- тцџУеђУфът»Йт┐ю (ТЌЦТюгУфъ/УІ▒Уфъ)
- УДБТ▒║уГќсЂ«ТЈљуц║ (тЈ»УЃйсЂфта┤тљѕ)

### REQ-ERR-004: сѓесЃЕсЃ╝ух▒УеѕсЃ╗жЏєУеѕ
- сѓесЃЕсЃ╝уЎ║ућЪујЄсЂ«У┐йУиА
- жа╗уЎ║сЂЎсѓІсѓесЃЕсЃ╝сЃЉсѓ┐сЃ╝сЃ│сЂ«УГўтѕЦ
- сЃЉсЃЋсѓЕсЃ╝сЃъсЃ│сѓ╣тй▒жЪ┐сЂ«ТИгт«џ

### REQ-ERR-005: сЃЄсЃљсЃЃсѓ░ТЃЁта▒тЈјжЏє
- жќІуЎ║сЃбсЃ╝сЃЅТЎѓсЂ«УЕ│у┤░сЃГсѓ░
- сЃЌсЃГсЃђсѓ»сѓисЃДсЃ│уњ░тбЃсЂДсЂ«Тюђт░ЈжЎљсЃГсѓ░
- сѓесЃЕсЃ╝тєЇуЈЙсЂФт┐ЁУдЂсЂфуіХТ│ЂТЃЁта▒

## ­ЪЈЌ№ИЈ сѓбсЃ╝сѓГсЃєсѓ»сЃЂсЃБУеГУеѕ

### ErrorManager сѓ»сЃЕсѓ╣ТДІжђа

```typescript
export class ErrorManager {
  // Core error handling
  static logError(error: Error, context: ErrorContext): Promise<void>
  static logWarning(message: string, context: ErrorContext): Promise<void>
  static logInfo(message: string, context: ErrorContext): Promise<void>
  
  // User-friendly error handling
  static handleUserError(error: Error): UserErrorInfo
  static getErrorMessage(error: Error, locale: 'ja' | 'en'): string
  
  // Statistics and monitoring
  static getErrorStats(): Promise<ErrorStatistics>
  static reportCriticalError(error: Error): Promise<void>
  
  // Chrome extension specific
  static handleChromeExtensionError(error: ChromeExtensionError): Promise<void>
  static handleStorageError(error: Error): Promise<void>
  static handlePermissionError(error: Error): Promise<void>
}
```

### сѓесЃЕсЃ╝тѕєжАъ

1. **Technical Errors** - сѓисѓ╣сЃєсЃатєЁжЃесѓесЃЕсЃ╝
2. **User Errors** - сЃдсЃ╝сѓХсЃ╝ТЊЇСйюсѓесЃЕсЃ╝
3. **Network Errors** - жђџС┐АсѓесЃЕсЃ╝
4. **Storage Errors** - сѓ╣сЃѕсЃгсЃ╝сѓИсѓесЃЕсЃ╝  
5. **Permission Errors** - ТеЕжЎљсѓесЃЕсЃ╝
6. **Validation Errors** - сЃЄсЃ╝сѓ┐ТцюУе╝сѓесЃЕсЃ╝

## ­ЪДф сЃєсѓ╣сЃѕУдЂТ▒ѓ

### REQ-ERR-TEST-001: сѓесЃЕсЃ╝сѓГсЃБсЃЃсЃЂсЃ╗сЃГсѓ░Уеўжї▓сЃєсѓ╣сЃѕ
- [ ] тљёуе«сѓесЃЕсЃ╝сѓ┐сѓцсЃЌсЂ«ТГБтИИсѓГсЃБсЃЃсЃЂ
- [ ] сЃГсѓ░тйбт╝ЈсЂ«ТцюУе╝
- [ ] жЮътљїТюЪсѓесЃЕсЃ╝тЄдуљєсЃєсѓ╣сЃѕ

### REQ-ERR-TEST-002: сѓесЃЕсЃ╝сЃАсЃЃсѓ╗сЃ╝сѓИУАеуц║сЃєсѓ╣сЃѕ  
- [ ] ТіђУАЊсѓесЃЕсЃ╝РєњсЃдсЃ╝сѓХсЃ╝сЃАсЃЃсѓ╗сЃ╝сѓИтцЅТЈЏ
- [ ] тцџУеђУфъсЃАсЃЃсѓ╗сЃ╝сѓИсЃєсѓ╣сЃѕ
- [ ] UIух▒тљѕсЃєсѓ╣сЃѕ

### REQ-ERR-TEST-003: сѓесЃЕсЃ╝ух▒УеѕТЕЪУЃйсЃєсѓ╣сЃѕ
- [ ] сѓесЃЕсЃ╝уЎ║ућЪујЄУеѕу«Ќ
- [ ] ух▒УеѕсЃЄсЃ╝сѓ┐тЈќтЙЌсЃ╗С┐ЮтГў
- [ ] сЃЉсЃЋсѓЕсЃ╝сЃъсЃ│сѓ╣ТИгт«џ

## ­Ъје сЃдсЃ╝сѓХсЃ╝сѓесѓ»сѓ╣сЃџсЃфсѓесЃ│сѓ╣

### сѓесЃЕсЃ╝УАеуц║ТѕдуЋЦ
1. **Silent Errors** - сЃГсѓ░сЂ«сЂ┐сђЂсЃдсЃ╝сѓХсЃ╝сЂФжЮъУАеуц║
2. **Toast Errors** - уЪГТЎѓжќЊУАеуц║сЂ«У╗йтЙ«сѓесЃЕсЃ╝
3. **Modal Errors** - жЄЇУдЂсЂфсѓесЃЕсЃ╝сЂ«УЕ│у┤░УАеуц║
4. **Retry Errors** - тєЇУЕдУАїтЈ»УЃйсѓесЃЕсЃ╝сЂ«ТАѕтєЁ

### сѓесЃЕсЃ╝сЃАсЃЃсѓ╗сЃ╝сѓИСЙІ
```
ТіђУАЊсѓесЃЕсЃ╝: "DOMException: QuotaExceededError"
РєЊ тцЅТЈЏ
сЃдсЃ╝сѓХсЃ╝сЃАсЃЃсѓ╗сЃ╝сѓИ: "сѓ╣сЃѕсЃгсЃ╝сѓИт«╣жЄЈсЂїСИЇУХ│сЂЌсЂдсЂёсЂЙсЂЎсђѓСИЇУдЂсЂфсЃЄсЃ╝сѓ┐сѓњтЅіжЎцсЂЌсЂдсЂЈсЂасЂЋсЂёсђѓ"
```

## ­ЪћД т«ЪУБЁтёфтЁѕт║д

### Phase 1 (т┐Ёжаѕ)
- [x] ErrorManagerтЪ║Тюгсѓ»сЃЕсѓ╣
- [x] ТДІжђатїќсЃГсѓ░ТЕЪУЃй
- [x] ChromeТІАт╝хсѓесЃЕсЃ╝т»Йт┐ю
- [x] сЃдсЃ╝сѓХсЃ╝сЃАсЃЃсѓ╗сЃ╝сѓИтцЅТЈЏ

### Phase 2 (ТјетЦе)  
- [x] сѓесЃЕсЃ╝ух▒УеѕТЕЪУЃй
- [x] сЃЄсЃљсЃЃсѓ░ТЃЁта▒тЈјжЏє
- [x] ТЌбтГўсЃбсѓИсЃЦсЃ╝сЃФух▒тљѕ

### Phase 3 (ТІАт╝х)
- [ ] сЃфсЃбсЃ╝сЃѕсЃГсѓ░жђЂС┐А
- [ ] сѓесЃЕсЃ╝тѓЙтљЉтѕєТъљ
- [ ] УЄфтІЋтЙЕТЌДТЕЪУЃй

## ­ЪњА ТіђУАЊуџёУђЃТЁ«С║ІжаЁ

### ChromeТІАт╝хтѕХу┤ё
- Service WorkerсЃЕсѓцсЃЋсѓхсѓцсѓ»сЃФт»Йт┐ю
- Content Security PolicyТ║ќТІа
- сѓ╣сЃѕсЃгсЃ╝сѓИт«╣жЄЈтѕХжЎљ
- Background/ContentжќЊжђџС┐АсѓесЃЕсЃ╝

### сЃЉсЃЋсѓЕсЃ╝сЃъсЃ│сѓ╣УдЂС╗Х
- сѓесЃЕсЃ╝сЃГсѓ░тЄдуљєсЂ»50msС╗ЦтєЁ
- сЃАсЃбсЃфСй┐ућежЄЈсЂ»Тюђт░ЈжЎљсЂФТіЉтѕХ
- сЃљсЃЃсЃЋсѓАсЃфсЃ│сѓ░ТЕЪУЃйсЂДжФўжа╗т║дсЃГсѓ░т»Йт┐ю

### сѓ╗сѓГсЃЦсЃфсЃєсѓБУђЃТЁ«
- ТЕЪт»єТЃЁта▒сЂ«сЃГсѓ░тЄ║тіЏтЏъжЂ┐
- сѓесЃЕсЃ╝сЃАсЃЃсѓ╗сЃ╝сѓИсЂ«ТЃЁта▒Т╝ЈТ┤Ежў▓ТГб
- сЃдсЃ╝сѓХсЃ╝сЃЄсЃ╝сѓ┐С┐ЮУГи

## ­Ъј» ТѕљтіЪтЪ║Т║ќ

- [ ] тЁесЃбсѓИсЃЦсЃ╝сЃФсЂДErrorManagerух▒тљѕт«їС║є
- [ ] сѓесЃЕсЃ╝уЎ║ућЪТЎѓсЂ«жЂЕтѕЄсЂфсЃдсЃ╝сѓХсЃ╝жђџуЪЦ
- [ ] сЃЄсЃљсЃЃсѓ░ті╣ујЄ50%тљЉСИі
- [ ] сѓ»сЃЕсЃЃсѓисЃЦујЄ90%тЅіТИЏ
- [ ] сЃдсЃ╝сѓХсЃЊсЃфсЃєсѓБсЃєсѓ╣сЃѕтљѕТа╝